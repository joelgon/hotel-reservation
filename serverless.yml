app: hotel-reservation
service: hotel-reservation

useDotenv: true

provider:
  name: aws
  runtime: nodejs20.x
  stage: local
  region: us-east-1
  iamRoleStatements:
    - Effect: Allow
      Action:
        - lambda:InvokeFunction
        - lambda:CreateFunction
      Resource: "*"

plugins:
  - serverless-localstack
  - serverless-dotenv-plugin

custom:
  localstack:
    debug: true
    stages:
      - local  # Certifique-se de que o stage 'local' est√° aqui
    host: http://localhost
    edgePort: 4566
    autostart: true
    lambda:
      mountCode:
    docker:
      sudo: true

functions:
  hello:
    handler: src/presentation/handler.hello
    events:
      - http:
          path: /hello
          method: get

  sign-up:
    handler: src/presentation/function/sign-up.handler
    timeout: 30
    events:
      - http:
          path: /sign-up
          method: post
